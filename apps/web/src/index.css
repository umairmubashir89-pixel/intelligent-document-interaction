/* base */
* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; }
body { overflow-y: auto; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: #e9e9ea; background: #15171a; font-size: 13px; }

/* layout */
.layout { display: flex; min-height: 100vh; width: 100%; }
.main { display: grid; grid-template-rows: 56px auto auto; min-height: 100vh; width: 100%; }

/* sidebar */
.sb { width: 300px; background: #0b0d10; border-right: 1px solid #1a1d22; display: flex; flex-direction: column; transition: width .2s ease; }
.sb--collapsed { width: 76px; }
.sb__top { height: 56px; display: flex; align-items: center; justify-content: space-between; padding: 0 10px; }
.sb__brand { font-size: 18px; letter-spacing: .08em; }
.sb__collapse { height: 32px; width: 32px; border-radius: 8px; border: 1px solid #2a2f38; background: #1a1d22; color: #e9e9ea; cursor: pointer; }
.sb__collapse:hover { background: #22262c; }
.sb__body { display: flex; flex-direction: column; height: calc(100% - 56px); padding: 0 10px 10px; }
.sb__new { height: 40px; border-radius: 16px; background: #1f242b; border: 1px solid #2a2f38; color: #e9e9ea; cursor: pointer; margin-top: 6px; }
.sb__new:hover { background: #252b33; }
.sb__list { margin-top: 8px; overflow: auto; padding-right: 4px; }
.sb__item { height: 40px; width: 100%; border-radius: 12px; padding: 0 10px; text-align: left; color: #e9e9ea; border: 1px solid #1a1d22; background: #0f1216; cursor: pointer; margin-bottom: 6px; }
.sb__item:hover { background: #171c22; }
.sb__item.is-active { background: #20242b; border-color: #2f353e; }

/* top bar */
.topbar { height: 56px; border-bottom: 1px solid #1a1d22; display: flex; align-items: center; justify-content: space-between; padding: 0 16px; }
.topbar__title { font-size: 12px; opacity: .7; }

/* model picker */
.model-picker { display: flex; align-items: center; gap: 8px; }
.model-picker select { height: 30px; background: #0f1216; border: 1px solid #1a1d22; border-radius: 8px; padding: 0 8px; color: #e9e9ea; font-size: 12px; }
.model-busy { font-size: 11px; opacity: .7; }

/* messages lane */
.messages { width: 100%; }
.messages__wrap { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 10px; padding: 16px; }
.msg { width: 100%; max-width: 820px; display: flex; }
.msg--user { justify-content: flex-end; }
.msg__bubble { max-width: 820px; border-radius: 16px; padding: 10px 12px; margin: 4px 0; }

/* bubbles */
.user-bubble { background: #21262d; color: #f1f1f2; border: 1px solid #2e3440; }
.assistant-bubble { background: #0f1216; color: #e9e9ea; border: 1px solid #1a1d22; }

/* markdown (font down by 2px) */
.md-root { font-size: 12px; line-height: 1.6; }
.md-p { margin: .45rem 0; }
.md-ul, .md-ol { padding-left: 1.1rem; margin: .35rem 0; }
.md-h1 { font-size: 18px; margin: .7rem 0 .35rem; }
.md-h2 { font-size: 16px; margin: .6rem 0 .3rem; }
.md-h3 { font-size: 14px; margin: .5rem 0 .25rem; }
.md-quote { border-left: 3px solid #323842; padding: .4rem .8rem; background: #12151a; border-radius: 8px; }
.md-a { color: #7aa2f7; text-decoration: none; }
.md-a:hover { text-decoration: underline; }
.inline-code { background: #151a20; border: 1px solid #1f2430; padding: .08rem .32rem; border-radius: 6px; font-size: 12px; }

/* code bubble */
.code-bubble { border: 1px solid #1a1d22; background: #0b0d10; border-radius: 12px; overflow: hidden; margin: .55rem 0; }
.code-bubble__bar { background: #161a1f; border-bottom: 1px solid #1a1d22; height: 32px; display: flex; align-items: center; justify-content: space-between; padding: 0 10px; }
.code-bubble__lang { font-size: 11px; opacity: .8; }
.code-bubble__actions button { background: #22262c; border: 1px solid #2b3038; color: #e9e9ea; border-radius: 8px; height: 22px; padding: 0 8px; margin-left: 6px; cursor: pointer; font-size: 12px; }
.code-bubble__actions button:hover { background: #2a3038; }
.code-bubble pre { margin: 0; padding: 10px; overflow: auto; font-size: 12px; line-height: 1.5; }

/* ghost think */
.ghost-think { margin-bottom: 8px; opacity: .72; }
.ghost-think__body { margin-top: 6px; color: #bfc4cc; white-space: pre-wrap; }

/* footer & composer (sticky bottom) */
.footer { position: sticky; bottom: 0; border-top: 1px solid #1a1d22; padding: 12px 16px; background: linear-gradient(180deg,#15171ae6 0,#15171a 40%); }
.filebubble { max-width: 820px; margin: 0 auto 8px; background: #0f1216; border: 1px solid #1a1d22; border-radius: 14px; padding: 8px 10px; display: flex; gap: 10px; align-items: center; }
.filebubble__icon { font-size: 16px; }
.filebubble__name { font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.composer { display: flex; justify-content: center; }
.composer__box { width: 100%; max-width: 820px; background: #0f1216; border: 1px solid #1a1d22; border-radius: 16px; padding: 10px 12px; }
.composer__box textarea { width: 100%; min-height: 44px; max-height: 164px; line-height: 18px; resize: none; background: transparent; color: #e9e9ea; border: 0; outline: none; font-size: 13px; }
.composer__toolbar { margin-top: 8px; display: flex; align-items: center; justify-content: space-between; }
.toolbar-left { display: flex; align-items: center; gap: 12px; }
.mic { height: 34px; width: 34px; border-radius: 999px; background: #1a1d22; border: 1px solid #262b33; cursor: pointer; }
.mic:hover { background: #22262c; }
.mic--on { background: #2a60ff; border-color: #2a60ff; animation: pulse 1s infinite alternate; }
@keyframes pulse { from { transform: scale(1); } to { transform: scale(1.06); } }
.attach { opacity: .8; cursor: pointer; font-size: 12px; }
.send { background: #343a46; border: 1px solid #3f4653; color: #e9e9ea; border-radius: 10px; height: 32px; padding: 0 14px; cursor: pointer; font-size: 12px; }
.send--on { background: #2a60ff; border-color: #2a60ff; }
.send--on:hover { filter: brightness(1.05); }
